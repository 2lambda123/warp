<!doctype html>
<html class="docs-version-current" lang="en-GB" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.15">
<link rel="alternate" type="application/rss+xml" href="/warp/blog/rss.xml" title="Warp 🚀 RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/warp/blog/atom.xml" title="Warp 🚀 Atom Feed"><title data-react-helmet="true">Cairo Blocks | Warp 🚀</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://nethermindeth.github.io//warp/docs/features/cairo_stubs"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Cairo Blocks | Warp 🚀"><meta data-react-helmet="true" name="description" content="Cairo Blocks allow users to place their desired Cairo code into a transpiled contract."><meta data-react-helmet="true" property="og:description" content="Cairo Blocks allow users to place their desired Cairo code into a transpiled contract."><link data-react-helmet="true" rel="icon" href="/warp/img/warp.svg"><link data-react-helmet="true" rel="canonical" href="https://nethermindeth.github.io//warp/docs/features/cairo_stubs"><link data-react-helmet="true" rel="alternate" href="https://nethermindeth.github.io//warp/docs/features/cairo_stubs" hreflang="en-GB"><link data-react-helmet="true" rel="alternate" href="https://nethermindeth.github.io//warp/vi/docs/features/cairo_stubs" hreflang="vi"><link data-react-helmet="true" rel="alternate" href="https://nethermindeth.github.io//warp/docs/features/cairo_stubs" hreflang="x-default"><link rel="stylesheet" href="/warp/assets/css/styles.23321e92.css">
<link rel="preload" href="/warp/assets/js/runtime~main.2e01dfcf.js" as="script">
<link rel="preload" href="/warp/assets/js/main.5acade52.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region"><a href="#" class="skipToContent_ZgBM">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/warp/"><div class="navbar__logo"><img src="/warp/img/warp.svg" alt="Warp Logo" class="themedImage_W2Cr themedImage--light_TfLj"><img src="/warp/img/warp.svg" alt="Warp Logo" class="themedImage_W2Cr themedImage--dark_oUvU"></div><b class="navbar__title">Warp</b></a><a class="navbar__item navbar__link navbar__link--active" href="/warp/docs/intro">Docs</a><a class="navbar__item navbar__link" href="/warp/blog">Blog</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/NethermindEth/warp" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" class="navbar__link"><span><svg viewBox="0 0 20 20" width="20" height="20" aria-hidden="true" class="iconLanguage_dNtB"><path fill="currentColor" d="M19.753 10.909c-.624-1.707-2.366-2.726-4.661-2.726-.09 0-.176.002-.262.006l-.016-2.063 3.525-.607c.115-.019.133-.119.109-.231-.023-.111-.167-.883-.188-.976-.027-.131-.102-.127-.207-.109-.104.018-3.25.461-3.25.461l-.013-2.078c-.001-.125-.069-.158-.194-.156l-1.025.016c-.105.002-.164.049-.162.148l.033 2.307s-3.061.527-3.144.543c-.084.014-.17.053-.151.143.019.09.19 1.094.208 1.172.018.08.072.129.188.107l2.924-.504.035 2.018c-1.077.281-1.801.824-2.256 1.303-.768.807-1.207 1.887-1.207 2.963 0 1.586.971 2.529 2.328 2.695 3.162.387 5.119-3.06 5.769-4.715 1.097 1.506.256 4.354-2.094 5.98-.043.029-.098.129-.033.207l.619.756c.08.096.206.059.256.023 2.51-1.73 3.661-4.515 2.869-6.683zm-7.386 3.188c-.966-.121-.944-.914-.944-1.453 0-.773.327-1.58.876-2.156a3.21 3.21 0 011.229-.799l.082 4.277a2.773 2.773 0 01-1.243.131zm2.427-.553l.046-4.109c.084-.004.166-.01.252-.01.773 0 1.494.145 1.885.361.391.217-1.023 2.713-2.183 3.758zm-8.95-7.668a.196.196 0 00-.196-.145h-1.95a.194.194 0 00-.194.144L.008 16.916c-.017.051-.011.076.062.076h1.733c.075 0 .099-.023.114-.072l1.008-3.318h3.496l1.008 3.318c.016.049.039.072.113.072h1.734c.072 0 .078-.025.062-.076-.014-.05-3.083-9.741-3.494-11.04zm-2.618 6.318l1.447-5.25 1.447 5.25H3.226z"></path></svg><span>English</span></span></a><ul class="dropdown__menu"><li><a href="/warp/docs/features/cairo_stubs" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active">English</a></li><li><a href="/warp/vi/docs/features/cairo_stubs" target="_self" rel="noopener noreferrer" class="dropdown__link">Tiếng Việt</a></li></ul></div><div class="toggle_Pssr toggle_TdHA toggleDisabled_jDku"><div class="toggleTrack_SSoT" role="button" tabindex="-1"><div class="toggleTrackCheck_XobZ"><span class="toggleIcon_eZtF">🌜</span></div><div class="toggleTrackX_YkSC"><span class="toggleIcon_eZtF">🌞</span></div><div class="toggleTrackThumb_uRm4"></div></div><input type="checkbox" class="toggleScreenReader_JnkT" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_P2Lg"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_RiI4" type="button"></button><aside class="theme-doc-sidebar-container docSidebarContainer_rKC_"><div class="sidebar_CW9Y"><nav class="menu thin-scrollbar menu_SkdO"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/warp/docs/intro">Welcome</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link hasHref_VCh3" href="/warp/docs/category/getting-started">Getting Started</a><button aria-label="Toggle the collapsible sidebar category &#x27;Getting Started&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--active hasHref_VCh3" aria-current="page" href="/warp/docs/category/features">Features</a><button aria-label="Toggle the collapsible sidebar category &#x27;Features&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/warp/docs/features/cairo_stubs">Cairo Blocks</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/warp/docs/features/contract_factories">Contract Factories</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/warp/docs/features/interface_call_forwarder">Interface Call Forwarder</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link hasHref_VCh3" href="/warp/docs/category/solidity-equivalents">Solidity Equivalents</a><button aria-label="Toggle the collapsible sidebar category &#x27;Solidity Equivalents&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link hasHref_VCh3" href="/warp/docs/category/contribution-guidelines">Contribution Guidelines</a><button aria-label="Toggle the collapsible sidebar category &#x27;Contribution Guidelines&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/warp/docs/get_around_unsupported_features">Get around unsupported features.</a></li></ul></nav></div></aside><main class="docMainContainer_TCnq"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_DM6M"><div class="docItemContainer_vinB"><article><div class="tocCollapsible_jdIR theme-doc-toc-mobile tocMobile_TmEX"><button type="button" class="clean-btn tocCollapsibleButton_Fzxq">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Cairo Blocks</h1></header><p>Cairo Blocks allow users to place their desired Cairo code into a transpiled contract.
This allows users to avoid inefficiently transpiled functions, implement Cairo features that Warp does not yet support and allow transpiled contracts to interact with native Cairo contracts.</p><p>The system works in the following way:</p><ol><li>To start a Cairo Block add your Cairo code above a Solidity function with 3 forward slashes at the beginning of each line and the phrase <code>warp-cairo</code> at the top.</li><li>The user then uses a number of MACROS to interact with the transpiled contract.</li><li>The Solidity function will then be replaced with the Cario function that is above it.</li></ol><p>The following MACROS are supported:</p><p><code>CURRENTFUNC</code> - References the Solidity function it is stubbing.</p><p><code>DECORATOR</code> - Adds decorators to the function.</p><p><code>INTERNALFUNC</code> - References an internal function matching the string that is passed to it.</p><p><code>STATEVAR</code> - References the state variable matching the string passed to it.</p><p>Please note that the Solidity you are stubbing will still have to preserve the integrity of the AST, so whatever you are passing into your Cairo Block will have to match its corresponding Solidity function below.</p><p>Below is an example of how Cairo Blocks are intended to be used:</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">// SPDX-License-Identifier: BUSL-1.1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pragma solidity ^0.8.14;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">contract Example {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ///warp-cairo</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ///DECORATOR(external)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ///func CURRENTFUNC()(lhs : felt, rhs : felt) -&gt; (res : felt):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ///    if lhs == 0:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ///        return (rhs)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ///    else:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ///        return CURRENTFUNC()(lhs - 1, rhs + 1)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ///    end</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ///end</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  function recursiveAdd(uint8 lhs, uint8 rhs) pure external returns (uint8) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return 0;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>The solidity code above gets transpiled into the following Cairo:</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">%lang starknet</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">from warplib.maths.external_input_check_ints import warp_external_input_check_int8</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">from starkware.cairo.common.cairo_builtins import HashBuiltin</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Contract Def Example</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@storage_var</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">func WARP_STORAGE(index : felt) -&gt; (val : felt):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">end</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@storage_var</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">func WARP_USED_STORAGE() -&gt; (val : felt):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">end</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@storage_var</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">func WARP_NAMEGEN() -&gt; (name : felt):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">end</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">func readId{syscall_ptr : felt*, pedersen_ptr : HashBuiltin*, range_check_ptr : felt}(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    loc : felt</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">) -&gt; (val : felt):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    alloc_locals</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    let (id) = WARP_STORAGE.read(loc)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    if id == 0:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        let (id) = WARP_NAMEGEN.read()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        WARP_NAMEGEN.write(id + 1)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        WARP_STORAGE.write(loc, id + 1)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return (id + 1)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    else:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return (id)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    end</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">end</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">namespace Example:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # Dynamic variables - Arrays and Maps</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # Static variables</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @external</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    func recursiveAdd_87bcdfdf(lhs : felt, rhs : felt) -&gt; (res : felt):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if lhs == 0:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            return (rhs)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        else:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            return recursiveAdd_87bcdfdf(lhs - 1, rhs + 1)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        end</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    end</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @constructor</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    func constructor{syscall_ptr : felt*, pedersen_ptr : HashBuiltin*, range_check_ptr : felt}():</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        alloc_locals</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return ()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    end</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">end</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>The contract above now has the CairoBlock present and its corresponding Solidity function removed.</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="additional-examples-of-using-cairo-blocks">Additional examples of using Cairo Blocks:<a class="hash-link" href="#additional-examples-of-using-cairo-blocks" title="Direct link to heading">​</a></h2><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">pragma solidity ^0.8.10;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// SDPX-License-Identifier: MIT</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">contract Base {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ///warp-cairo</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ///DECORATOR(external)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ///func CURRENTFUNC()() -&gt; (res: felt):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ///    return (1)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ///end</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  function externalDefinedInBase() virtual pure external returns (uint8) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return 0;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ///warp-cairo</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ///func CURRENTFUNC()() -&gt; (res: felt):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ///    return (2)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ///end</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  function internalDefinedInBase() virtual pure internal returns (uint8) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return 0;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">contract WARP is Base {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  function testExternalDefinedInBase() view public returns (uint8) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return this.externalDefinedInBase();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  function testInternalDefinedInBase() pure public returns (uint8) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return internalDefinedInBase();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ///warp-cairo</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ///DECORATOR(external)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ///func CURRENTFUNC()() -&gt; (res: felt):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ///    return (1)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ///end</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  function simpleCase() pure external returns (uint8) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return 0;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ///warp-cairo</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ///DECORATOR(external)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ///func CURRENTFUNC()(lhs : felt, rhs : felt) -&gt; (res : felt):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ///    if lhs == 0:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ///        return (rhs)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ///    else:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ///        return CURRENTFUNC()(lhs - 1, rhs + 1)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ///    end</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ///end</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  function recursiveAdd(uint8 lhs, uint8 rhs) pure external returns (uint8) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return 0;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>Cairo Blocks used for proxy:</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">pragma solidity ^0.8.10;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// SPDX-License-Identifier: MIT</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">contract WARP {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  /// warp-cairo</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  /// from starkware.starknet.common.syscalls import library_call</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  /// DECORATOR(external)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  /// DECORATOR(raw_input)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  /// DECORATOR(raw_output)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  /// func __default__{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ///     syscall_ptr : felt*,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ///     pedersen_ptr : HashBuiltin*,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ///     range_check_ptr,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  /// }(selector : felt, calldata_size : felt, calldata : felt*) -&gt; (</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ///     retdata_size : felt, retdata : felt*</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  /// ):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ///     alloc_locals</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ///     let (class_hash_low) = WARP_STORAGE.read(STATEVAR(implementation_hash))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ///     let (class_hash_high) = WARP_STORAGE.read(STATEVAR(implementation_hash) + 1)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ///     let class_hash = class_hash_low + 2**128 * class_hash_high</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ///</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ///     let (retdata_size : felt, retdata : felt*) = library_call(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ///         class_hash=class_hash,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ///         function_selector=selector,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ///         calldata_size=calldata_size,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ///         calldata=calldata,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ///     )</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ///     return (retdata_size=retdata_size, retdata=retdata)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  /// end</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  fallback() external {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  uint256 implementation_hash = 0;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  function setHash(uint256 newHash) external {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    implementation_hash = newHash;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">```</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/NethermindEth/warp/tree/develop/docs/docs/features/cairo_stubs.mdx" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_dcUD" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_foO9"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/warp/docs/category/features"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Features</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/warp/docs/features/contract_factories"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Contract Factories</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_cNA8 thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#additional-examples-of-using-cairo-blocks" class="table-of-contents__link toc-highlight">Additional examples of using Cairo Blocks:</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/warp/docs/intro">Documentation</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items"><li class="footer__item"><a href="https://discord.gg/sqFY2D48GS" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/warp/blog">Blog</a></li><li class="footer__item"><a href="https://nethermind.io/" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Nethermind<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2023 Warp. Made with ❤️ by Nethermind.</div></div></div></footer></div>
<script src="/warp/assets/js/runtime~main.2e01dfcf.js"></script>
<script src="/warp/assets/js/main.5acade52.js"></script>
</body>
</html>